<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Student Dashboard | LMS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body style="margin: 0; font-family: 'Segoe UI', Roboto, Arial, sans-serif; background: #f5f7fb; color: #202124;">

<div style="height: 70px; background: #fff; border-bottom: 1px solid #e5e7eb; display: flex; justify-content: space-between; align-items: center; padding: 0 40px;">
    <div style="display: flex; align-items: center; gap: 20px;">
        <div style="font-size: 1.4rem; font-weight: 800; color: #1a73e8;">STUDENT LMS</div>
        <a href="{% url 'home' %}" style="text-decoration:none; font-weight:600; color:#202124;">üè† Home</a>
    </div>

    <div style="display:flex; gap:20px; align-items:center;">
        <span>Welcome, <strong style="color:#1a73e8;">{{ user.username }}</strong></span>
        <a href="{% url 'logout' %}" style="color:#d93025; text-decoration:none; font-weight:600;">Logout</a>
    </div>
</div>

<div style="max-width:1200px; margin:40px auto; padding:0 20px;">

    <h1 style="margin-bottom:5px;">Dashboard</h1>
    <p style="color:#6b7280;">Manage your courses, notes and leave requests</p>

    <h2 style="margin-top:40px;">Available Courses</h2>

    <div style="display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:20px;">
        {% for course in available_courses %}
        <div style="background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:20px;">
            <h3>{{ course.title }}</h3>
            <p style="color:#6b7280;">{{ course.description|truncatechars:80 }}</p>
            <a href="{% url 'enroll' course.id %}" style="display:inline-block; background:#1a73e8; color:#fff; padding:8px 14px; border-radius:6px; text-decoration:none;">Enroll</a>
        </div>
        {% empty %}
        <p>No courses available.</p>
        {% endfor %}
    </div>

    <!-- ================= MY NOTES ================= -->
    <h2 style="margin-top:50px;">My Notes</h2>

    <div style="background:#fff; border-radius:12px; border:1px solid #e5e7eb; overflow:hidden;">
        <table style="width:100%; border-collapse:collapse;">
            <thead style="background:#f8f9fa;">
                <tr>
                    <th style="padding:14px;">Title</th>
                    <th style="padding:14px;">Course</th>
                    <th style="padding:14px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for note in notes %}
                <tr style="border-top:1px solid #eee;">
                    <td style="padding:14px;">
                        <a href="{% url 'view_note' note.id %}"
                           style="color:#1a73e8; font-weight:600; text-decoration:none;">
                            {{ note.title }}
                        </a>
                    </td>
                    <td style="padding:14px;">
                        {{ note.course.title }}
                    </td>
                    <td style="padding:14px;">
                        <a href="{% url 'edit_note' note.id %}" style="color:#1a73e8;">Edit</a> |
                        <a href="{% url 'delete_note' note.id %}" style="color:#d93025;">Delete</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" style="padding:30px; text-align:center;">
                        No notes yet.
                        <a href="{% url 'add_note' %}" style="color:#1a73e8; font-weight:600;">Create one</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    <!-- ================= LEAVE REQUESTS ================= -->
    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:50px;">
        <h2>Leave Requests</h2>
        <a href="{% url 'apply_leave' %}" style="background:#111827; color:#fff; padding:8px 16px; border-radius:6px; text-decoration:none;">+ Apply Leave</a>
    </div>

    <div style="background:#fff; border-radius:12px; border:1px solid #e5e7eb; overflow:hidden;">
        <table style="width:100%; border-collapse:collapse;">
            <thead style="background:#f8f9fa;">
                <tr>
                    <th style="padding:14px;">Duration</th>
                    <th style="padding:14px;">Reason</th>
                    <th style="padding:14px; text-align:center;">Status</th>
                </tr>
            </thead>
            <tbody>
                {% for leave in leaves %}
                <tr style="border-top:1px solid #eee;">
                    <td style="padding:14px;">{{ leave.from_date }} ‚Üí {{ leave.to_date }}</td>
                    <td style="padding:14px;">{{ leave.reason }}</td>
                    <td style="padding:14px; text-align:center;">
                        {% if leave.status == 'APPROVED' %}
                            <span style="color:green; font-weight:700;">APPROVED</span>
                        {% elif leave.status == 'REJECTED' %}
                            <span style="color:red; font-weight:700;">REJECTED</span>
                        {% else %}
                            <span style="color:#b06000; font-weight:700;">PENDING</span>
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" style="padding:30px; text-align:center;">No leave requests</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

</div>

<!-- ================= FOOTER ================= -->
<div style="margin-top:60px; padding:20px; text-align:center; color:#9ca3af; border-top:1px solid #e5e7eb;">
    ¬© 2026 Student LMS
</div>

</body>
</html>
